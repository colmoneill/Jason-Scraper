{% block body %}
{% from "helpers/_form.html" import render_field, upload_field %}
<div class="col-md-12">
  <form action="" method="post" enctype="multipart/form-data" id="artistForm">
    {{ form.csrf_token }}
    {{ render_field(form.name) }}
    <hr>
    {{ upload_field('image', 'Artworks', images) }}
    <hr>
    <div class="container-fluid">
    <div class="row">
      <div class="form-group">
        <div class="col-xs-6">
          <label class="control-label">Artist info text</label> <a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet#headers">markdown enabled</a>
          {{ form.wysiwig_artist_info(only_input=True, rows=20) }}
        </div>
        <div class="col-xs-6">
          <label>&larr; Text preview</label>
          {{ form.wysiwig_artist_info(only_preview=True) }}
        </div>
      </div>
    </div>
    <hr>
    <div class="row">
      <div class="form-group">
        <div class="col-xs-6">
          <label class="control-label">Artist exhibition list</label> <a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet#headers">markdown enabled</a>
          {{ form.wysiwig_artist_exhibitions_list(only_input=True, rows=20) }}
        </div>
        <div class="col-xs-6">
          <label>&larr; Text preview</label>
          {{ form.wysiwig_artist_exhibitions_list(only_preview=True) }}
        </div>
      </div>
    </div>
    <br>
    <div class="row">
      <div class="form-group">
        <div class="col-xs-6">
          <label class="control-label">Artist bio</label> <a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet#headers">markdown enabled</a>
          {{ form.wysiwig_artist_bio(only_input=True, rows=20) }}
        </div>
        <div class="col-xs-6">
          <label>&larr; Text preview</label>
          {{ form.wysiwig_artist_bio(only_preview=True) }}
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12">
        <h4>Press release pdf</h4>
        {{ form.press_release_file }}
      </div>
    </div>
    <hr>
    <div class="row">
      <div class="col-sm-12">
        <h4>media link 1</h4>
      </div>
        <div class="col-sm-6">
          {{ render_field(form.link_name1) }}
        </div>
        <div class="col-sm-6">
          {{ render_field(form.link_url1) }}
        </div>
    </div>
    <hr>
    <div class="row">
      <div class="col-sm-12">
        <h4>media link 2</h4>
      </div>
        <div class="col-sm-6">
          {{ render_field(form.link_name2) }}
        </div>
        <div class="col-sm-6">
          {{ render_field(form.link_url2) }}
        </div>
    </div>
    <hr>
    <div class="row">
      <div class="col-sm-12">
        <h4>media link 3</h4>
      </div>
        <div class="col-sm-6">
          {{ render_field(form.link_name3) }}
        </div>
        <div class="col-sm-6">
          {{ render_field(form.link_url3) }}
        </div>
    </div>
    <hr>

    <div class="col-sm-12">
    <h4>These exhibitions will be shown on the artist's page</h4>
    </div>
    {% for exhibition in exhibitions %}
      <div class="col-sm-12">
        {% if exhibition.is_group_expo %}
          <b>{{ exhibition.exhibition_name }}</b> (group exhibition) <br> participants: {{ exhibition['artists']|join(', ', attribute='name') }}
        {% else %}
            <b>{{ exhibition.artist.name }}</b> <br> {{ exhibition.exhibition_name }}
        {% endif%}
        <br> {{ exhibition.start.strftime('%d.%m.%Y') }} > {{ exhibition.end.strftime('%d.%m.%Y') }}
      </div>
      <br>
    {% endfor %}

    <hr>
    <div class="col-sm-12">
    <p><code>fields marked with a * are required</code></p>
    </div>
    <button type="submit" class="btn btn-default" id="submit-button">Submit</button>
    <button class="btn btn-default hidden" disabled="disabled" id="processing-button"><span class="glyphicon glyphicon-refresh spin" aria-hidden="true"></span>&nbsp;Processing...</button>
</form>
<script type="text/javascript" src="/static/js/upload.js"></script>
<script type="text/javascript">
    window.addEventListener("load", function () {
        var form = new Form($('form#artistForm'));
        form.addUploadField("image", $("#image"));
    }, false);
</script>
</div>
{% endblock %}
