{% block body %}
{% from "helpers/_form.html" import render_field %}
<form action="" method="post" enctype="multipart/form-data" id="artistForm">
    {{ form.csrf_token }}
    {{ render_field(form.name) }}
    <hr>
    <div class="row">
      <h4>Selectable images shown here</h4>
      <div id="artist-images">
        <label>Select exhibition images</label>
        <div class="thumbnail-container"></div>
        <hr>
        <br>
        <div>
          <p>
            <input type="file" class="aggregator" multiple="true" accept="image/*" />
            <input type="file" class="filepicker" multiple="true" accept="image/*" />
            <button id="artist-image-upload" class="btn btn-default">Select images to upload</button>
            or drag-and-drop them on this container.
          </p>
        </div>
        <br>
        <hr>
        <div class="dropmask bg-info"></div>
      </div>
    </div>
    <hr>
    <div class="container-fluid">
    <div class="row">
      <div class="col-md-6">
        <label>Artist info text</label> <a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet#headers">markdown enabled</a>
        {{ form.wysiwig_artist_info(only_input=True, rows=20) }}
      </div>
      <div class="col-md-6">
        <label>&larr; Text preview</label>
        {{ form.wysiwig_artist_info(only_preview=True) }}
      </div>
    </div>
<hr>
    <div class="row">
      <div class="col-xs-6">
        <label>Artist bio & exhibition list</label> <a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet#headers">markdown enabled</a>
        {{ form.wysiwig_artist_bio(only_input=True, rows=20) }}
      </div>
      <div class="col-xs-6">
        <label>&larr; Text preview</label>
        {{ form.wysiwig_artist_bio(only_preview=True) }}
      </div>
    </div>
  </div>
    {{ form.press_release_file }}
    <hr>
    <hr>
    <h3>Select exhibitions to be shown on artist page</h3>

    {% for exhibition in exhibitions %}
    <li class="list-group-item row">
      <div class="col-md-8">
        {% if exhibition.is_group_expo %}
          <b>{{ exhibition.exhibition_name }}</b> (group exhibition) <br> participants: {{ exhibition['artists']|join(', ', attribute='name') }}
        {% else %}
            <b>{{ exhibition.artist.name }}</b> <br> {{ exhibition.exhibition_name }}
        {% endif%}
        <br> {{ exhibition.start.strftime('%d.%m.%Y') }} > {{ exhibition.end.strftime('%d.%m.%Y') }}
      </div>
      <br>
      <div class="col-md-4 text-right">
        <input type="checkbox" name="checkbox-published" {# {{ 'checked="checked"' if (exhibition.is_published) }} #} value="{{ exhibition._id }}" />
      </div>
    </li>
    {% endfor %}

    <p><code>fields marked with a * are required</code></p>
    <button type="submit" class="btn btn-default">Submit</button>
</form>
<script type="text/javascript" src="/static/js/upload.js"></script>
<script type="text/javascript">
    window.addEventListener("load", function () {
        uploadField("image", $("#artist-images"), $('form#artistForm'));
    }, false);
</script>
{% endblock %}
